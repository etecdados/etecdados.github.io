<!DOCTYPE html>
<html>
  <head>
    <title>Drive API Quickstart</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <p>Drive API Quickstart</p>

    <button onclick="myfunc()">Button</button>

    <pre id="content" style="white-space: pre-wrap;"></pre>
    <div id="span"></div>



    <script type="text/javascript">
    
    

      
       function appendPre(message) {
           var pre = document.getElementById('content');
           var textContent = document.createTextNode(message + '\n');
           pre.appendChild(textContent);
      }
      



        var request = new XMLHttpRequest();
        var link = "1cEjNAgInd0io3U31CQc2jf-krJL-_KFZ";
        var key = "AIzaSyDCkCbZhcCrB6hMeg6gIKYz_CAEQmd0--c";
        var url  = "https://www.googleapis.com/drive/v3/files?q='" + link + "'+in+parents&key=" + key;
        request.open("GET", url);
        request.send();

        

        
        
        
        request.onreadystatechange = function() {
   
              if (request.readyState == XMLHttpRequest.DONE) {

                

                var id = "id:";
                var ggg = "mimeType";
                var hhh = "image";
                
                var txt = request.response.replace(/\n|"|{|}| /g, '');

                var sss = txt.split(",");

                
                console.log(txt);
                console.log(sss);
                
                

              

                var oco = new Array();
                var mim = new Array();
                

                for (var a = 0; a < sss.length; a++) {
                  if (sss[a].search(id) >= 0) {
                    oco.push(sss[a].replace(id, ""));
                  } else if (sss[a].search(ggg) >= 0) {
                    if (sss[a].search(hhh) > 0) {
                      mim.push(true);
                    } else {
                      mim.push(false);
                    }
                    
                  } 
                    
                }

                  console.log(oco);
                  console.log(mim);

               

                var img = document.createElement("img");
                img.setAttribute("src", "https://drive.google.com/uc?export=view&id=" + oco[3]);
                img.setAttribute("style", "height: 400px");
                var span = document.getElementById("span");
                span.appendChild(img);
              
              }
          }


          
         
          
          

        /*

        request.onreadystatechange = (e) => {
          

            var files = request.responseText;

            

            if (files && files.length > 0) {
                for (var i = 0; i < files.length; i++) {
                var file = files[i];
                appendPre(file.name + ' (' + file.id + ')');
                }
            } else {
                appendPre('No files found.');
            }
        }

        */
        
      

    </script>


  </body>
</html>

